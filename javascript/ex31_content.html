<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>

        #tbl1 {
            border: 1px solid black;
            border-collapse: collapse;
            width: 500px;
            height: 500px;
        }

        #tbl1 td {
            border: 1px solid black;
            width: 100px;
            height: 100px;
            text-align: center;
            font-size: 5em;
            font-weight: bold;
        }

    </style>
</head>
<body>
    <!-- ex31_content.html -->

    <h1>게시판  <small>글쓰기</small></h1>

    <div id="filelist">
        <div>
            <input type="button" id="btnAdd" value="첨부파일 추가하기">
        </div>
        <div>
            <label>첨부파일 : </label>
            <input type="file">
        </div>
        <div id="filesublist"></div>
    </div>


    <h1>테이블</h1>

    <table id="tbl1">
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
    </table>

    <script>

        var btnAdd = document.getElementById("btnAdd");
        var filelist = document.getElementById("filelist");

        btnAdd.onclick = function() {
            filelist.innerHTML += "<div><label>첨부파일 : </label><input type='file'></div>";
        };

        //Q 누적이 안된다. 왜지?
        //A 클릭 이벤트를 한번 실행할 때, 똑같은 HTML코드를 써서 HTML 전체를 덮어쓰기를 하기 때문에 이벤트가 걸려있던 버튼이 사라진다. 그래서 처음 클릭 시에만 이벤트가 발생한다.

        //Q 누적이 되게 만드려면 어떻게 해야하나?
        //A. 원래 이벤트가 걸려있던 버튼을 따로 만들어서 덮어쓰기 되지(지워지지) 않도록 한다. 아래와 같이 코드를 바꿔주면 된다.
        
        var btnAdd = document.getElementById("btnAdd");
        var filelist = document.getElementById("filelist");
        var filesublist = document.getElementById("filesublist");

        btnAdd.onclick = function() {
            filesublist.innerHTML += "<div><label>첨부파일 : </label><input type='file'></div>";
        };


        //
        var td = document.getElementsByTagName("td");
        console.log(td.length);

        for (var i=0; i<td.length; i++) {
            td[i].onmousedown =  function() {
                // alert();
                // -> i 사용금지 -> 변수 호이스팅
                // td[i] -> event.srcElement
                // var i -> let i
                
                // alert(event.srcElement.bgColor);

                // if (event.srcElement.bgColor == "") {
                //     event.srcElement.bgColor = "tomato";
                // } else {
                //     event.srcElement.bgColor = "transparent";
                // }
                
                // event.srcElement.innerText = "O";
                event.srcElement.innerHTML = "<img src='../images/catty01.png'style='width:100px;height:100px;display:block;'>"

            };

            // td[i].onmouseout = function() {
            //     event.srcElement.bgColor = "transparent";
            // };
        }

    </script>

</body>
</html>